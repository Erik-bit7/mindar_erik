<!DOCTYPE html>
<html>
<head>
  <title>Mon3</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://castelletm12b.cat/build/assets/question.js" defer></script>
</head>
<body>
  <!-- Música de fondo fuera de <a-scene> -->
  <audio autoplay loop>
    <source src="assets/Green-Hill-Zone.mp3" type="audio/mpeg">
  </audio>

  <a-scene cursor="rayOrigin: mouse">
    <!-- Fondo del mundo -->
    <a-sky src="assets/world.jpeg" rotation="0 -90 0"></a-sky>

    <!-- Pista visual -->
    <a-text value="Busca las gemas legendarias..." position="0 3 -5" color="blue" scale="2 2 2"></a-text>

    <!-- Rings distribuidos lejos de la cámara y del texto -->
    <a-entity gltf-model="assets/sonic_ring/scene.gltf" position="50 10 -50" scale="0.3 0.3 0.3"></a-entity>
    <a-entity gltf-model="assets/sonic_ring/scene.gltf" position="-60 15 -40" scale="0.3 0.3 0.3"></a-entity>
    <a-entity gltf-model="assets/sonic_ring/scene.gltf" position="70 20 60" scale="0.3 0.3 0.3"></a-entity>
    <a-entity gltf-model="assets/sonic_ring/scene.gltf" position="-80 12 70" scale="0.3 0.3 0.3"></a-entity>
    <a-entity gltf-model="assets/sonic_ring/scene.gltf" position="40 18 -90" scale="0.3 0.3 0.3"></a-entity>

    <!-- Ring especial escondido con ChaosEmeralds -->
    <a-entity gltf-model="assets/sonic_ring/scene.gltf" position="-100 5 -100" scale="0.3 0.3 0.3" onclick="showChaosEmeralds()"></a-entity>

    <!-- Imagen de las Chaos Emeralds (inicialmente oculta) -->
    <a-plane id="chaosEmeralds" src="assets/ChaosEmeralds.png" position="0 3 -5" width="3" height="2" visible="false"></a-plane>

    <!-- Pregunta (inicialmente oculta) -->
    <a-text id="question" value="¿Como se llaman el controlador de las gemas?" position="1 1 -9" color="red" scale="2 2 2" visible="false"></a-text>

    <!-- Salida (inicialmente oculta) -->
    <a-box question="71" id="exitDoor" position="0 0 -9" width="2" height="2" depth="2" visible="false"
           material="src: assets/Item.jpg; repeat: 1 1" onclick="goToNextLevel()"></a-box>

    <!-- Cámara al nivel del suelo -->
    <a-camera position="0 1.6 0"></a-camera>
  </a-scene>

  <script>
    // Mostrar las Chaos Emeralds, la pregunta y la salida
    function showChaosEmeralds() {
      const chaosEmeralds = document.querySelector("#chaosEmeralds");
      const question = document.querySelector("#question");
      const exitDoor = document.querySelector("#exitDoor");

      chaosEmeralds.setAttribute("visible", "true");
      alert("¡Has encontrado las Chaos Emeralds!");

      // Mostrar la pregunta y la salida
      question.setAttribute("visible", "true");
      exitDoor.setAttribute("visible", "true");
    }

  </script>
</body>
</html>
